tcp连接时候的三次握手
1.客户端首先向服务端进行connect数据请求，第一次握手
2.服务端收到连接请求后，如果同意连接，则会发出确认ACK报文，第二次握手后，
客户端进入ESTABLISHED（已建立连接）状态。
3.客户端收到确认后，还要向服务器给出确认，第三次握手后，服务端也进入
ESTABLISHED状态，就可以进行通信了。

为什么要有三次握手，而不是两次握手就可以？
答：如果第一次客户端的请求没有丢失，而是由于网络不通畅等待时间过长，客户
端没有收到服务端的确认报文，会重新发送一次连接请求。如果这次失效的请求由
于网络通畅又到了服务器端，则又建立了一次连接，这是错误的，不必要的连接。
如果多了第三次握手的确认，那么就不会出现上面那种情况了。

tcp断开连接时候的四次挥手
1.客户端向服务端发送释放报文，并停止发送数据。
2.服务器收到释放请求，发出确认报文。但此时服务器端进入关闭等待状态，可能
还会向客户端发送数据，客户端依然要接受。
3.服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，服务器进入了
最后确认状态，等待客户端的确认。
4.客户端收到连接释放报文后，必须发送确认，但此时TCP连接还没有释放，还需要
等待客户端撤销TCB后，才进入关闭状态。

总结：连接的三次握手和关闭连接的四次挥手，都是客户端先发送请求，但连接时
候，客户端先进入ESTABLISHED状态，而断开连接时候是服务器端先进入CLOSED关闭
状态。

建立连接            关闭连接        或  
客户端     服务端       客户端      服务端      服务端     客户端
1    ----->             1     ------>                 ----->
2    <-----             2     <------                 <-----   
3    ----->             3     <------                 <-----
                        4     ------>                 ----->

TIME_WAIT状态有两个存在的理由：

(1) 可靠地实现TCP全双工连接的终止；

(2) 允许老的重复分节在网络中消逝。

